"use strict";const basketEl=document.querySelector(".basket span"),basketTotalEl=document.querySelector(".basket__total"),basketTotalValueEl=document.querySelector(".basket__total_value");document.querySelector(".basket").addEventListener("click",(()=>{document.querySelector(".basket__product").classList.toggle("basket__product_hidden")}));const basket={};function addToBasket(t,e,a){t in basket||(basket[t]={id:t,name:e,price:a,count:0}),basket[t].count++,basketTotalEl.textContent=getBasketTotal().toString(),basketTotalPriceEl.textContent=getBasketTotalPrice().toFixed(2),renderProductBasket(t)}function getBasketTotal(){return Object.values(basket).reduce(((t,e)=>t+e.count),0)}function getBasketTotalPrice(){return Object.values(basket).reduce(((t,e)=>t+e.price*e.count),0)}function renderProductBasket(t){const e=document.querySelector(`.basket__name[data-productId="${t}"]`);if(!e)return void renderNewProductBasket(t);const a=basket[t];e.querySelector(".product__basket_count").textContent=a.count,e.querySelector(".product__basket_total").textContent=(a.price*a.count).toFixed(2)}function renderNewProductBasket(t){const e=`\n    <div class="basket__name" data-productId="${t}">\n      <div>${basket[t].name}</div>\n      <div>\n        <span class = "product__basket_count"> $ {basket[productId].count} </span> шт.\n      </div>\n      <div>$${basket[t].price}</div>\n      <div>\n        $<span class="product__basket_total">${(basket[t].price*basket[t].count).toFixed(2)}</span>\n      </div>\n    </div>\n    `;basketTotalEl.insertAdjacentHTML("beforebegin",e)}document.querySelector("cards__list").addEventListener("click",(t=>{if(!t.target.classList.contains("cards__add__link"))return;const e=t.target.closest(".cards__item");addToBasket(+e.dataset.id,e.dataset.name,+e.dataset.price)}));